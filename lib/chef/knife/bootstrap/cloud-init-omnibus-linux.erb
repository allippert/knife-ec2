#cloud-config
#
# This is a cloud-init that will install a chef-client when an
# instance boots the first time.  This version should work on
# Ubuntu and Redhat based systems where the cloud-init version >= 1.7.2

chef:
 # Valid values are 'gems' and 'packages' and 'omnibus'
 install_type: "omnibus"

 # Boolean: run 'install_type' code even if chef-client
 #          appears already installed.
 force_install: false

 # Chef settings
 server_url: "<%= chef_server_url %>"

 # Node Name
 # Defaults to the instance-id if not present
 node_name: "your-node-name"

 # Environment
 # Defaults to '_default' if not present
 environment: "<%= chef_config[:knife][:environment] %>"

 # Default validation name is chef-validator
 validation_name: "<%= chef_config[:knife][:user] %>"

 run_list:
 #  - "recipe[yum]"
 #  - "recipe[memcached]"

 # validation_key: |
 #<%= validation_key.gsub(/^(.)/, '  \1') %>

 # Specify a list of initial attributes used by the cookbooks
 # initial_attributes:
 #    apache:
 #      prefork:
 #        maxclients: 100
 #      keepalive: "off"

 # if install_type is 'omnibus', change the url to download
 omnibus_url: "https://www.opscode.com/chef/install.sh"

# Capture all subprocess output into a logfile
# Useful for troubleshooting cloud-init issues
output: {all: '| tee -a /var/log/cloud-init-output.log'}
